var hostForMirandoJs="get.mirando.de";var altHostForMirandoJs="get.besucht.de";var mirandoJsDebug=false;if(window.location.href.indexOf('mirandodebug=1')>=0)
    mirandoJsDebug=true;if(typeof Mirando=="undefined"){var Mirando={};}
if(typeof Mirando.instanceRegistry=="undefined"){(function(){function InstanceRegistry(){var me=this;var instances={};this.getNextInstanceIdFor=function(adPlaceId){if(!instances[adPlaceId]){instances[adPlaceId]=1;}
else{instances[adPlaceId]++;}
    return instances[adPlaceId];};}
    Mirando.instanceRegistry=new InstanceRegistry();})();}
if(typeof Mirando.log=="undefined"){(function(){var MirLog=function(){var entries=[];this.out=function(msg){entries.push(msg);};this.dump=function(){if(typeof console=="undefined"||typeof console.info=="undefined"){alert(entries.join('\n'));}
else{for(var i=0;i<entries.length;i++){console.info(entries[i]);}}
    entries=[];};};Mirando.log=new MirLog();}());}
Mirando.ImpressionIdFactory=function(){var uuIdFactory=new Mirando.UuIdFactory();this.getOrCreate=function(){var result=load();if(!result){result=createNew();if(!save(result))
    return null;}
    return result;};function createNew(){return uuIdFactory.create();}
    function load(){try{var id=getParentWindow().mirImpId;if(id){return uuIdFactory.parse(id);}}
    catch(e){return false;}
        return false;}
    function save(impId){try{getParentWindow().mirImpId=impId.toString();}
    catch(e){return false;}
        return true;}
    function getParentWindow(){var win,depth,maxDepth=10;do{win=window.parent;depth++;}
    while(win.parent!=win&&depth<maxDepth);return win;}
    var that=this;};Mirando.UuIdFactory=function(){var uuidPattern=new RegExp(/^[a-z0-9]{8}\-[a-z0-9]{4}\-[a-z0-9]{4}\-[a-z0-9]{4}\-[a-z0-9]{12}$/);var hexDigits='0123456789abcdef';var pattern="########-####-####-####-############";var UuId=function(uuid){this.toString=function(){return uuid;}};this.create=function(){var result=[];for(var i=0;i<pattern.length;i++){var c=pattern.charAt(i);if(c=='#'){result.push(randomDigit());}
else{result.push(c);}}
    return new UuId(result.join(''));};this.parse=function(uuidAsString){if(uuidPattern.exec(uuidAsString)==null){throw'Invalid UuId: '+uuidAsString;}
    return new UuId(uuidAsString);};function randomDigit(){return hexDigits.charAt([Math.floor(Math.random()*16)]);}};Mirando.QueryStringParser=function(){var queryStringPattern=new RegExp(/(\?|#)(.*)/);var params=null;var queryString;var mirandoScript=null;this.get=function(name){return params[name];};this.init=function(scriptIndex){var self=this;mirandoScript=getMirandoScriptInsertAtX(scriptIndex);if(mirandoScript===null)
    return false;params=self.parse(scriptIndex);return true;};this.getScript=function(){return mirandoScript;};this.toString=function(){var result=[];for(var i in params){if(typeof params[i]!='function'&&typeof params[i]!='object'){result.push(i+"="+params[i]);}}
    return result.join('&');};this.getMirandoScriptInsertAtX=function(index){return getMirandoScriptInsertAtX(index);};this.getLastMirandoScriptInserted=function(){return getLastMirandoScriptInsert();};this.parse=function(){var self=this;return self.parseUrl(mirandoScript.src.replace('&amp;','&'));};this.parseUrl=function(url){return parseUrl(url);};function parseUrl(url){var result=[];var groups=queryStringPattern.exec(url);if(!groups){return result;}
    if(groups.length==3){var queryString=groups[2];var pairs=queryString.split(/[;&]/);for(var i=0;i<pairs.length;i++){var keyVal=pairs[i].split('=');if(keyVal&&keyVal.length==2){var key=unescape(keyVal[0]);result[key]=unescape(keyVal[1]);}}}
    return result;}
    function getLastMirandoScriptInsert(){var scripts=document.getElementsByTagName('script');var myScript=null;for(var i=scripts.length;i>0;i--){if(scripts[i-1].src.indexOf('mirando.js')>=0){myScript=scripts[i-1];break;}}
        return myScript;}
    function getMirandoScriptInsertAtX(index){var scripts=document.getElementsByTagName('script');var myScript=null;var indexCounter=0;for(var i=0;i<scripts.length;i++){if(scripts[i].src.indexOf('mirando.js')>=0){if(indexCounter==index){myScript=scripts[i];return myScript}
        indexCounter++;}}
        console.log('!!!no script found at '+index);return null;}};Mirando.AdRequest=function(adPlaceId,impressionId,instanceId,queryString,scriptId,isAsync){var that=this;var locationProto=('http:'==document.location.protocol?'http://':'https://');var urlPattern=locationProto+hostForMirandoJs+'/%{type}/%{adPlaceId}/%{impressionId}/%{instanceId}/?%{queryString}';var asyncJs="";if(isAsync)
    asyncJs="async ";var jsIncludePattern='<script id="'+scriptId+'" '+asyncJs+'type="text/javascript" src="%{url}"][/script]'.replace(/\[/g,'<').replace(/\]/g,'>');this.render=function(){return renderJsInclude(that.getRequestUrl());};this.getRequestUrl=function(){return renderRequestUrl(adPlaceId,impressionId,queryString);};function renderJsInclude(url){return jsIncludePattern.replace('%{url}',url);}
    function renderRequestUrl(adPlaceId,impressionId,queryString){var type='repository';var _adplaceId=adPlaceId;var _instanceId=instanceId;if(adPlaceId<0){type='material';_adplaceId=adPlaceId+'/'+adPlaceId;_instanceId='init';}
        return urlPattern.replace('%{type}',type).replace('%{adPlaceId}',_adplaceId).replace('%{impressionId}',impressionId).replace('%{queryString}',queryString).replace('%{instanceId}',_instanceId);}};Mirando.AsyncLoader=function(){var that=this;var scriptsToBeLoaded=0;var mirGetPlacerCounter=0;var currentDeliverSid=null;var lastDeliverSid=null;var writeCache='';var currentAdmaterial=null;var restJsCode=[];var rejecteds=[];var faultys=[];var isFallback=false;var currentPlacer=[];var rejectsActive=[];var rejectsDone=[];var waitForPrioDeliv=0;var lastAdmaterials=[];var deliversDone=[];var knownSources=[];var asyncRejectViewtrackings=[];var asyncRejectViewtrackingTestRunning=false;var admPlaceCount=0;var repositoryRequestSent=false;this.increaseScriptsToBeLoaded=function(){scriptsToBeLoaded++;};this.decreaseScriptsToBeLoaded=function(){scriptsToBeLoaded--;if(scriptsToBeLoaded<0){console.log('decreaseScriptsToBeLoaded underflow');scriptsToBeLoaded=0;}};this.getScriptsToBeLoaded=function(){return scriptsToBeLoaded;};this.getRepositoryRequestSent=function(){return repositoryRequestSent;};this.setRepositoryRequestSent=function(newRepositoryRequestSent){repositoryRequestSent=newRepositoryRequestSent;};this.pushWriteCache=function(pushStr){if(currentAdmaterial&&(pushStr.indexOf('rejectDelivery'+currentAdmaterial+"();")>=0||pushStr.indexOf('rejectDelivery'+currentAdmaterial+" ();")>=0)){rejecteds[currentDeliverSid]=true;}
    var NOSCRIPT_REGEX=/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi;while(NOSCRIPT_REGEX.test(pushStr)){pushStr=pushStr.replace(NOSCRIPT_REGEX,"");}
    writeCache+=pushStr;};this.execute=function(func){(function(){func();})();};this.isValidSource=function(stackTrace){if(!stackTrace){var stackTraceCode="";var caller=arguments.callee.caller;var i=0;var stacktraceCodes=[];while(caller&&i<15){stacktraceCodes.push(caller);caller=caller.caller;i++;}
    var totalStracktrace=stacktraceCodes.join(' ');if(totalStracktrace.indexOf('mirInsertHtmlDynamicStartVar')>=0||totalStracktrace.indexOf('mirInsertJsDynamicStart')>=0||stacktraceCodes.length<=1){return true;}
    if(!isValid)
        console.log('invalid source'+stackTrace);if(mirandoJsDebug){console.log('isValidSource');for(var i in stacktraceCodes){console.log(stacktraceCodes[i]);}}
    return false;}
    var laststackTraceRow=stackTrace.split(/\n/);laststackTraceRow=laststackTraceRow[laststackTraceRow.length-1];var isValid=false;if(stackTrace){for(var i in knownSources){if(laststackTraceRow.indexOf(knownSources[i])>=0||laststackTraceRow.indexOf('mirando.js')){isValid=true;break;}}}
    else
        isValid=true;if(!isValid)
        console.log('invalid source'+stackTrace);return isValid;};this.insertHtmlDynamic=function(el,str,doInsertBefore){var mirInsertHtmlDynamicStartVar='mirInsertHtmlDynamicStartVar';mirInsertHtmlDynamicStartVar+='';if(el===null){debugger;return;}
    if(el===null&&mirandoJsDebug){console.log('null el in insertHtmlDynamic ('+currentAdmaterial+')');}
    var elemConstructorName=(el).constructor.toString();if(typeof str==="function"){try{str();var _writeCache=''+writeCache;writeCache='';mirandoAsyncLoader.insertBeforeHtml(el,_writeCache);}
    catch(e){console.log('error in insertHtmlDynamic execute str ('+currentAdmaterial+'):'+e.message);mirandoAsyncLoader.log({t:"error",adm:currentAdmaterial,url:encodeURIComponent(window.location.href)});if(str.length>10000)
        console.log(str.substr(0,10000)+'....');else
        console.log(str);faultys[currentDeliverSid]=true;}}
    else{var div=document.createElement('div');div.innerHTML=str;var childNodes=[];for(var i=0;i<div.childNodes.length;i++){childNodes.push(div.childNodes[i]);}
        var regexViewTrackpixel=new RegExp(hostForMirandoJs+'\/track\/[0-9]*?\/[0-9]*?\/.*?\/view','i');for(var i=0;i<childNodes.length;i++){var childNode=childNodes[i];var childNodeElemConstructorName=(childNode).constructor.toString();if(childNodeElemConstructorName.indexOf('HTMLScriptElement')>=0&&childNode.src){this.insertJsScriptElement(childNode,el,doInsertBefore);}
        else if(childNodeElemConstructorName.indexOf('HTMLScriptElement')>=0&&!childNode.src){var jsCode=childNode.innerHTML;if(doInsertBefore){el.parentNode.insertBefore(childNode,el);}
        else{el.appendChild(childNode);}
            jsCode=jsCode.replace(/(?:\r\n|\r|\n)/g,'#x#NEWLINE#x#');var myRegexp=/<!\s*?\[\s*?CDATA\s*?\[(.*?)]]\s*?>/g;var match=myRegexp.exec(jsCode);if(match!=null&&match[1])
                jsCode=match[1];jsCode=jsCode.replace(/^\s+|\s+$/g,"");jsCode=jsCode.replace("$(document).ready(function()","mirandoAsyncLoader.execute(function()");if(jsCode.substr(0,2)=='*/')
                jsCode=jsCode.substr(2);if(jsCode.substr(-2)=='/*')
                jsCode=jsCode.substr(0,jsCode.length-2);jsCode=jsCode.replace(/#x#NEWLINE#x#/g,'\n');try{if(mirandoAsyncLoader.getScriptsToBeLoaded()>0){restJsCode.push([doInsertBefore,doInsertBefore?childNode:el,jsCode]);}
            else{window.eval(jsCode);if(writeCache!=''){var _writeCache=''+writeCache;writeCache='';if(doInsertBefore)
                mirandoAsyncLoader.insertBeforeHtml(childNode,_writeCache);else
                mirandoAsyncLoader.insertInsideHtml(el,_writeCache);}}}
            catch(e){console.log('error in insertHtmlDynamic window.eval ('+currentAdmaterial+'):'+e.message);mirandoAsyncLoader.log({t:"error",adm:currentAdmaterial,url:encodeURIComponent(window.location.href)});if(jsCode.length>100000)
                console.log(jsCode.substr(0,100000)+'....');else
                console.log(jsCode);faultys[currentDeliverSid]=true;}}
        else if(childNode.nodeType==Node.TEXT_NODE||childNode.nodeName.toLowerCase()=='style'){if(el.nodeType!=Node.COMMENT_NODE){if(doInsertBefore){el.parentNode.insertBefore(childNode,el);}
        else{el.appendChild(childNode);}}}
        else if(childNode.nodeName.toLowerCase()=='svg'||childNode.nodeName.toLowerCase()=='img'){if(doInsertBefore){el.parentNode.insertBefore(childNode,el);}
        else{el.appendChild(childNode);}}
        else{var iHtml=childNode.innerHTML;childNode.innerHTML="";if(doInsertBefore){el.parentNode.insertBefore(childNode,el);this.insertInsideHtml(el.previousSibling,iHtml);}
        else{el.appendChild(childNode);this.insertInsideHtml(el.lastChild,iHtml);}}}}};this.insertJsScriptElement=function(scriptNode,placerElement,doInsertBefore){var elemConstructorName=(placerElement).constructor.toString();var se=document.createElement('script');se.type='text/javascript';var scripSrc=scriptNode.src;if(location.protocol.indexOf('https')>=0&&scripSrc.indexOf('http://')===0){scripSrc=scripSrc.replace('http://','https://');}
    var isScriptAsync=(scriptNode.outerHTML.toLowerCase().indexOf('async')>0);knownSources.push(scripSrc.split('#')[0]);se.src=scripSrc;if(scriptNode.id){se.id=scriptNode.id;}
    var isRepositoryRequestSent=(se.src.indexOf(hostForMirandoJs+'/repository/')>=0||se.src.indexOf(altHostForMirandoJs+'/repository/')>=0);var isFallback=(isRepositoryRequestSent&&se.src.indexOf('as=1')<0);if(se.src.indexOf('mirando.js')<0&&!isFallback&&!isScriptAsync){mirandoAsyncLoader.increaseScriptsToBeLoaded();se.onload=function(){if(writeCache!=''){var _writeCache=''+writeCache;writeCache='';mirandoAsyncLoader.insertBeforeHtml(se,_writeCache);}
        mirandoAsyncLoader.decreaseScriptsToBeLoaded();};se.onerror=function(){mirandoAsyncLoader.decreaseScriptsToBeLoaded();};}
    else if(!isFallback&&isRepositoryRequestSent){repositoryRequestSent=true;se.onload=function(){repositoryRequestSent=false;};}
    if(isFallback){if(mirandoJsDebug){console.log('initiating fallback for admaterial '+currentAdmaterial+' on tag __mirget'+currentDeliverSid);}
        this.makeFallbackRepositoryRequestByScript(se,currentDeliverSid);}
    else if(se.src.indexOf('mirando.js')>=0){doInsertBefore=false;if(elemConstructorName.indexOf('HTMLScriptElement')>=0)
        doInsertBefore=true;mirandoAsyncLoader.insertMirandoJsAsync(se,placerElement,doInsertBefore);}
    else if(doInsertBefore){placerElement.parentNode.insertBefore(se,placerElement);se=placerElement.previousSibling;}
    else{placerElement.appendChild(se);placerElement=placerElement.lastChild;}}
    this.makeFallbackRepositoryRequestByScript=function(se,deliverSid){var asyncRepositoryRequestFunc=function(){mirandoAsyncLoader.setRepositoryRequestSent(true);se.onload=function(){mirandoAsyncLoader.setRepositoryRequestSent(false);};se.onerror=function(){mirandoAsyncLoader.setRepositoryRequestSent(false);};se.src=se.src+"&as=1&sid=__mirfb"+deliverSid;se.async=true;document.body.appendChild(se);};this.renderRepositoryRequestAsyncWithFunction(asyncRepositoryRequestFunc);};this.insertMirandoJsAsync=function(se,el,doInsertBefore){se.async=true;if(se.src.indexOf('as=0')>=0){se.src=se.src.replace('as=0','as=1');}
    else if(se.src.indexOf('as=1')<=0){se.src=se.src+'&as=1';}
        if(hostForMirandoJs.indexOf('get.mirando.devx:9010')>=0){se.src=se.src.replace('https','http');}
        var retryTime=-1;var currentRetryTime=0;var maxRetryTime=10000;if(se.src.indexOf('&at=34')>=0){retryTime=500;}
        function deliverMirandoJsDelayed(){if(retryTime>0&&currentRetryTime<maxRetryTime&&(mirandoAsyncLoader.getRepositoryRequestSent()||mirandoAsyncLoader.getScriptsToBeLoaded()>0||currentAdmaterial!==null)){currentRetryTime+=retryTime;setTimeout(function(){deliverMirandoJsDelayed();},retryTime);}
        else{mirGetPlacerCounter++;var mirjsPlacerDiv=document.createElement('span');mirjsPlacerDiv.id="__mirget_placer_"+mirGetPlacerCounter;mirjsPlacerDiv.style.display='none';se.src=se.src+'&placer='+mirjsPlacerDiv.id;currentPlacer[currentDeliverSid]=mirjsPlacerDiv.id;if(doInsertBefore){el.parentNode.insertBefore(mirjsPlacerDiv,el);}
        else{el.appendChild(mirjsPlacerDiv);}
            document.body.appendChild(se);}}
        deliverMirandoJsDelayed();};this.insertJsDynamic=function(el,jsCode,doInsertBefore){var mirInsertJsDynamicStart='mirInsertJsDynamicStart';mirInsertJsDynamicStart+='';try{window.eval(jsCode);if(writeCache!=''){var _writeCache=''+writeCache;writeCache='';if(doInsertBefore)
        mirandoAsyncLoader.insertBeforeHtml(el,_writeCache);else
        mirandoAsyncLoader.insertInsideHtml(el,_writeCache);}}
    catch(e){console.log('error in insertJsDynamic window.eval ('+currentAdmaterial+'):'+e.message);if(jsCode.length>100000)
        console.log(jsCode.substr(0,100000)+'....');else
        console.log(jsCode);faultys[currentDeliverSid]=true;}};this.insertBeforeHtml=function(el,str){this.insertHtmlDynamic(el,str,true);};this.insertInsideHtml=function(el,str){this.insertHtmlDynamic(el,str,false);};this.appendFallbackByUrl=function(rejectAdmaterialId,url){var script='<script type="text/javascript" src="'+url+'"></script>';mirandoAsyncLoader.appendFallbackScript(rejectAdmaterialId,script);};this.appendFallbackScript=function(rejectAdmaterialId,str){var self=this;var e=document.createElement('div');e.innerHTML=str;var se=document.createElement('script');se.type='text/javascript';se.async=true;se.src=e.childNodes[0].src;se.src+=self.getAdditionalQueryParameters();var sid=parseInt(this.getParameterByName('sid',se.src).replace('__mirfb',''));var excludeMaterials=this.getParameterByName('excludeMaterials',se.src);var fallbackSid=sid;var directReject=true;var rejectMessage="Reject("+rejectAdmaterialId+")";if(lastAdmaterials[fallbackSid]!=rejectAdmaterialId||(fallbackSid in rejectsDone&&rejectAdmaterialId in rejectsDone[fallbackSid])){fallbackSid=null;for(var altSid in lastAdmaterials){if(lastAdmaterials[altSid]==rejectAdmaterialId&&!(altSid in rejectsDone&&rejectAdmaterialId in rejectsDone[altSid])){rejectMessage="Swap reject("+rejectAdmaterialId+")";rejectMessage+=" switched from "+sid;se.src=se.src.replace('__mirfb'+sid,'__mirfb'+altSid);fallbackSid=altSid;break;}}
        if(fallbackSid===null){fallbackSid=sid;console.log('!!!!Reject place for ('+rejectAdmaterialId+') cannot be found');}}
        if(!(fallbackSid in rejectsDone))
            rejectsDone[fallbackSid]=[];if(!(rejectAdmaterialId in rejectsDone[fallbackSid]))
            rejectsDone[fallbackSid][rejectAdmaterialId]=true;if(fallbackSid+'###'+rejectAdmaterialId in asyncRejectViewtrackings){delete asyncRejectViewtrackings[fallbackSid+'###'+rejectAdmaterialId];}
        if(fallbackSid in rejectsActive)
            delete rejectsActive[fallbackSid];if(mirandoJsDebug){document.getElementById("mirandoJsDebug"+fallbackSid).innerHTML=document.getElementById("mirandoJsDebug"+fallbackSid).innerHTML+"<br>"+rejectMessage;}
        var prev=document.getElementById("__mirget"+fallbackSid).previousSibling;if(fallbackSid in currentPlacer){if(document.getElementById(currentPlacer[fallbackSid]))
            prev=document.getElementById(currentPlacer[fallbackSid]).previousSibling;}
        var found=false;while(prev&&!found){if(prev.id&&prev.id.indexOf('mirThirdParty')==0&&prev.style.display!='none'){found=true;prev.style.display='none';}
        else
            prev=prev.previousSibling;}
        document.body.appendChild(se);};this.insertAsyncHtml=function(mid,admaterialId,str){if(mirandoJsDebug)
        console.log('load async admaterial '+admaterialId+' on tag '+mid);var deliverIndex=parseInt(mid.replace('__mirget','').replace('__mirfb',''));var _isFallback=false;if(mid.indexOf('__mirfb')>=0){mid=mid.replace('__mirfb','__mirget');_isFallback=true;}
        function startAsyncHtml(){var prioDeliverIndex=lastDeliverSid;if(prioDeliverIndex===null)
            prioDeliverIndex=0;prioDeliverIndex++;var doWait=false;if(mirandoAsyncLoader.getScriptsToBeLoaded()>0||currentAdmaterial!==null||doWait){setTimeout(function(){startAsyncHtml();},1);}
        else{waitForPrioDeliv=0;currentAdmaterial=admaterialId;isFallback=_isFallback;currentDeliverSid=deliverIndex;document.baseDocumentWrite=document.write;document.baseDocumentWriteln=document.writeln;var baseDocumentWrite=document.write;var baseDocumentWriteln=document.writeln;var se=document.getElementById(mid);lastAdmaterials[currentDeliverSid]=currentAdmaterial;admPlaceCount++;if(currentDeliverSid in deliversDone&&currentAdmaterial in deliversDone[currentDeliverSid]){mirandoAdLoader.viewportCheck('async double load sid:'+currentDeliverSid,currentAdmaterial);return;}
            if(!(currentDeliverSid in deliversDone))
                deliversDone[currentDeliverSid]=[];if(!(currentAdmaterial in deliversDone[currentDeliverSid]))
                deliversDone[currentDeliverSid].push(currentAdmaterial);document.write=function(html){if(mirandoAsyncLoader.isValidSource((new Error()).stack)){mirandoAsyncLoader.pushWriteCache(html);}
            else{document.baseDocumentWrite(html);}};document.writeln=function(html){if(mirandoAsyncLoader.isValidSource((new Error()).stack)){mirandoAsyncLoader.pushWriteCache(html+'\n');}
            else{document.baseDocumentWriteln(html);}};if(currentDeliverSid in currentPlacer){se=document.getElementById(currentPlacer[currentDeliverSid]);}
            if(mirandoJsDebug)
                console.log('start async admaterial '+admaterialId+' on tag '+mid);mirandoAsyncLoader.log({t:"start",adm:admaterialId,url:encodeURIComponent(window.location.href)});if(mirandoJsDebug){var adplaceId=mirandoAdLoader.getAdplaceByAdCounter(currentDeliverSid);if(isFallback)
                document.getElementById("mirandoJsDebug"+currentDeliverSid).innerHTML=document.getElementById("mirandoJsDebug"+currentDeliverSid).innerHTML+"<br>Fallback: "+currentAdmaterial+'('+admPlaceCount+')';else
                mirandoAsyncLoader.insertBeforeHtml(se,"<div id='mirandoJsDebug"+currentDeliverSid+"' style='padding:3px;border 1px solid black;background-color: #DDDDDD;width:130px;margin:1px;font-size:small'>Mirando Debug<br>Script Id:"+currentDeliverSid+"<br>Adplace Id:"+adplaceId+"<br>Admaterial:"+admaterialId+"("+admPlaceCount+")</div>");}
            mirandoAsyncLoader.insertBeforeHtml(se,str);function waitAsyncHtml(){if(mirandoAsyncLoader.getScriptsToBeLoaded()>0){setTimeout(function(){waitAsyncHtml();},1);}
            else if(restJsCode.length>0){_restJsCode=restJsCode.slice(0);restJsCode=[];for(i=0;i<_restJsCode.length;i++){mirandoAsyncLoader.insertJsDynamic(_restJsCode[i][1],_restJsCode[i][2],_restJsCode[i][0]);}
                setTimeout(function(){waitAsyncHtml();},1);}
            else{if(typeof"rejectDelivery"+currentAdmaterial!='undefined'){if(!(currentDeliverSid in rejectsDone)||!(currentAdmaterial in rejectsDone[currentDeliverSid]))
                rejectsActive[currentDeliverSid]=currentAdmaterial;}
                document.write=baseDocumentWrite;document.writeln=baseDocumentWriteln;if(mirandoJsDebug)
                    console.log('finish async admaterial '+admaterialId+' on tag '+mid);mirandoAsyncLoader.log({t:"end",adm:admaterialId,url:encodeURIComponent(window.location.href)});if(mirandoJsDebug){if(!(currentDeliverSid in rejecteds))
                    document.getElementById("mirandoJsDebug"+currentDeliverSid).innerHTML=document.getElementById("mirandoJsDebug"+currentDeliverSid).innerHTML+"<br>Finished";for(var rejected in rejecteds){if(document.getElementById("mirandoJsDebug"+rejected)===null){console.log("mirandoJsDebug "+rejected+" not found for rejected");}
                else
                    document.getElementById("mirandoJsDebug"+rejected).innerHTML=document.getElementById("mirandoJsDebug"+rejected).innerHTML+"<br>REJECTED!";}
                    for(var faulty in faultys){if(document.getElementById("mirandoJsDebug"+faulty)===null){console.log("mirandoJsDebug "+rejected+" not found for faulty");}
                    else
                        document.getElementById("mirandoJsDebug"+faulty).innerHTML=document.getElementById("mirandoJsDebug"+faulty).innerHTML+"<br>ERROR IN JS CHECK LOGS!";}
                    rejecteds=[];faultys=[];}
                currentAdmaterial=null;lastDeliverSid=currentDeliverSid;currentDeliverSid=null;if(!asyncRejectViewtrackingTestRunning&&Object.keys(asyncRejectViewtrackings).length>0){mirandoAsyncLoader.testAddAsyncRejectViewtrackings();}}}
            waitAsyncHtml();}}
        startAsyncHtml();};this.renderRepositoryRequestAsyncWithFunction=function(renderRepositoryRequestFunc){function renderRequestDelayed(asyncRequestFunc){if(mirandoAsyncLoader.getRepositoryRequestSent()){setTimeout(function(){renderRequestDelayed(asyncRequestFunc);},1);}
    else{asyncRequestFunc();}}
        renderRequestDelayed(renderRepositoryRequestFunc);};this.log=function(params){if(typeof mirandoAsyncLog!=='undefined'){var logReqUrl=mirandoAsyncLog+'?a=1';for(var k in params){logReqUrl=logReqUrl+"&"+k+"="+params[k];}
        var trackpix=document.createElement("img");trackpix.setAttribute('src',logReqUrl);trackpix.setAttribute('height','1px');trackpix.setAttribute('width','1px');trackpix.style.position='absolute';trackpix.style.left='-1000px';trackpix.style.top='-1000px';document.body.appendChild(trackpix);}};this.getParameterByName=function(name,url){if(!url){url=window.location.href;}
        name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "));};this.iframeAd=function(html,placeHolderId,width,height){var placeholderDiv=document.getElementById(placeHolderId);var iframeId="i_"+placeHolderId;var iframe=document.createElement('iframe');iframe.setAttribute("id",iframeId);iframe.setAttribute("width",width);iframe.setAttribute("height",height);iframe.setAttribute("frameborder","0");iframe.setAttribute("scrolling","no");iframe.setAttribute("marginwidth","0");placeholderDiv.appendChild(iframe);iframe=document.getElementById(iframeId);var iframedoc=iframe.document;if(iframe.contentDocument)
        iframedoc=iframe.contentDocument;else if(iframe.contentWindow)
        iframedoc=iframe.contentWindow.document;var rows=html.split("\n");iframedoc.open();for(var i in rows)
        iframedoc.writeln(rows[i]);iframedoc.close();};this.addAsyncRejectViewtrackings=function(admaterialId,scriptId,trackingUrl){var timestamp=(new Date()).getTime();var k=scriptId.replace('__mirget','')+"###"+admaterialId;asyncRejectViewtrackings[k]=timestamp+"###"+trackingUrl;};this.testAddAsyncRejectViewtrackings=function(){asyncRejectViewtrackingTestRunning=true;var timestamp=(new Date()).getTime();for(var k in asyncRejectViewtrackings){var kSplit=k.split('###');var vSplit=asyncRejectViewtrackings[k].split('###');var sid=parseInt(kSplit[0]);var oldTimestamp=parseInt(vSplit[0]);if(!(sid in deliversDone)||deliversDone[sid].indexOf(kSplit[1])<0){asyncRejectViewtrackings[k]=timestamp+'###'+vSplit[1];}
    else if(timestamp-oldTimestamp>3000){var vtPix=document.createElement('img');vtPix.setAttribute('src',unescape(vSplit[1]));document.body.appendChild(vtPix);delete(asyncRejectViewtrackings[k]);}}
        if(Object.keys(asyncRejectViewtrackings).length>0){setTimeout(function(){mirandoAsyncLoader.testAddAsyncRejectViewtrackings()},50);}
        else{asyncRejectViewtrackingTestRunning=false;}};this.getAdditionalQueryParameters=function(){var queryString='';if(top.location.href!=self.location.href){var topdomain;if(top.location.href.indexOf("://")>-1)
        topdomain=top.location.href.split('/')[2];else
        topdomain=top.location.href.split('/')[0];topdomain=topdomain.split(':')[0];queryString+="&topfqdn="+topdomain;}
        var dwidth=window.screen.availWidth||-1;var dheight=window.screen.availHeight||-1;var bwidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var bheight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;queryString+="&dwidth="+dwidth+"&dheight="+dheight+"&bwidth="+bwidth+"&bheight="+bheight;return queryString;};};Mirando.adLoader=function(){var adCounter=0;var adPlaceId=null;var alreadyAsyncLoaded=false;var syncWarningSend=false;var adplaceDictionary=[];this.nextAdCounter=function(){adCounter++;return adCounter;};this.getAdplaceByAdCounter=function(_adCounter){if(_adCounter in adplaceDictionary)
    return adplaceDictionary[_adCounter];return null;};this.getTopFrame=function(){var frame=window;try{while(frame.parent.document!==frame.document)frame=frame.parent;}catch(e){}
    return frame;};this.iframeBreaker=function(adPlaceId,mirandoQueryStringParser){var that=this;var adPlaceTypeId=mirandoQueryStringParser.get('at');if(adPlaceTypeId==4||adPlaceId==17589662||adPlaceId==13662560||adPlaceId==9544322||adPlaceId==9413719){var topFrame=that.getTopFrame();if(topFrame!=null&&topFrame!=window){var scriptElem=topFrame.document.createElement('script');scriptElem.src=mirandoQueryStringParser.getLastMirandoScriptInserted().src;topFrame.document.body.appendChild(scriptElem);return true;}}
    return false;};this.showAd=function(currentAdCounter){var that=this;var mirandoQueryStringParser=new Mirando.QueryStringParser();var res=mirandoQueryStringParser.init(currentAdCounter-1);if(!res)
    return;var lastMirandoScriptInserted=mirandoQueryStringParser.getScript();var adPlaceId=mirandoQueryStringParser.get('a');var impressionId=null;if(adPlaceId){impressionId=new Mirando.ImpressionIdFactory().getOrCreate();if(!impressionId){document.write("Auslieferung von Werbung im iFrame aus Sicherheitsgründen nicht möglich.");return;}
    if(that.iframeBreaker(adPlaceId,mirandoQueryStringParser)){return;}
    try{if(typeof mirLimitDisplayWidthMin!=='undefined'){if(window.screen.availWidth&&window.screen.availWidth<mirLimitDisplayWidthMin){console.log('admaterial delivery blocked because of mirLimitDisplayWidthMin');return;}}
        if(typeof mirLimitDisplayHeightMin!=='undefined'){if(window.screen.availHeight&&window.screen.availHeight<mirLimitDisplayHeightMin){console.log('admaterial delivery blocked because of mirLimitDisplayHeightMin');return;}}
        if(typeof mirLimitBrowserWindowWidthMin!=='undefined'){var bwidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(bwidth&&bwidth<mirLimitBrowserWindowWidthMin){console.log('admaterial delivery blocked because of mirLimitBrowserWindowWidthMin');return;}}
        if(typeof mirLimitBrowserWindowHeightMin!=='undefined'){var bheight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;if(bheight&&bheight<mirLimitBrowserWindowHeightMin){console.log('admaterial delivery blocked because of mirLimitBrowserWindowHeightMin');return;}}}
    catch(e){console.log(e);}
    var isAsync=false;var webQueryParams=mirandoQueryStringParser.parseUrl(document.location.href);var queryString=mirandoQueryStringParser.toString();if(queryString.indexOf('&as=1')>=0){isAsync=true;alreadyAsyncLoaded=true;}
    else{if(alreadyAsyncLoaded){if(!syncWarningSend){var warningDiv=document.createElement("div");warningDiv.style.position='fixed';warningDiv.style.left='30px';warningDiv.style.bottom='30px';warningDiv.style.borderWidth="2px";warningDiv.style.padding="6px";warningDiv.style.borderColor="#dd0000";warningDiv.style.width="200px";warningDiv.style.backgroundColor="#ffffff";warningDiv.innerHTML="Mirando Warnung:<br/>Keine gemischte Auslieferung auf asynchronen und synchronen Tags möglich";warningDiv.style.borderStyle="solid";warningDiv.style.color="#dd0000";syncWarningSend=true;document.body.appendChild(warningDiv);}
        return;}}
    var instanceId=Mirando.instanceRegistry.getNextInstanceIdFor(adPlaceId);var mid=this.getMid();var excludeMaterialTypes=mirandoQueryStringParser.get('excludeMaterialTypes');if(excludeMaterialTypes){queryString=queryString.replace('excludeMaterialTypes='+excludeMaterialTypes,'');queryString=(queryString?queryString+"&":"")+"excludeMaterialTypes="+excludeMaterialTypes.replace(',',';');}
    if(mid){queryString=(queryString?queryString+"&":"")+"mid="+mid;}
    queryString+=mirandoAsyncLoader.getAdditionalQueryParameters();if('miradmid'in webQueryParams){queryString+=(queryString?queryString+"&":"")+'admid='+webQueryParams['miradmid'];}
    if('includeCampaigns'in webQueryParams){queryString+=(queryString?queryString+"&":"")+'includeCampaigns='+webQueryParams['includeCampaigns'].replace(',',';');}
    var scriptId="__mirget"+currentAdCounter;adplaceDictionary[currentAdCounter]=adPlaceId;queryString=(queryString?queryString+"&":"")+"sid="+scriptId;var request=new Mirando.AdRequest(adPlaceId,impressionId.toString(),instanceId,queryString,scriptId,isAsync);var renderedRequest=request.render();if(isAsync){var placer=mirandoQueryStringParser.get('placer');var asyncRequestFunc=function(){mirandoAsyncLoader.setRepositoryRequestSent(true);if(typeof placer==='undefined'){placer=lastMirandoScriptInserted;mirandoAsyncLoader.insertBeforeHtml(placer,renderedRequest);}
    else{if(typeof placer=='string'){placer=document.getElementById(placer);}
        mirandoAsyncLoader.insertBeforeHtml(placer,renderedRequest);}
        var scriptInserted=document.getElementById(scriptId);scriptInserted.onload=function(){mirandoAsyncLoader.setRepositoryRequestSent(false);};scriptInserted.onerror=function(){mirandoAsyncLoader.setRepositoryRequestSent(false);};};mirandoAsyncLoader.renderRepositoryRequestAsyncWithFunction(asyncRequestFunc);}
    else{document.write(renderedRequest);}}
else{Mirando.log.out('unable to obtain adPlaceId from queryString');}
    return adPlaceId;};this.getMid=function(){try{var regex=new RegExp('(?:^|;)\\s?mid=(.*?)(?:;|$)','i');var match=document.cookie.match(regex);if(match){var mid=unescape(match[1]);if(mid){return mid;}}
    if(window.localStorage&&window.localStorage.getItem){return localStorage.getItem("mid");}}
catch(e){}};this.viewportCheck=function(_impressionId,_adPlaceId){var currentScript=document.currentScript||(function(){var scripts=document.getElementsByTagName('script');return scripts[scripts.length-1];})();var testxyuid=Math.floor((Math.random()*100000)+1);var trackdiv=document.createElement("div");trackdiv.setAttribute('id','testxy'+testxyuid);trackdiv.setAttribute('height','1px');trackdiv.setAttribute('width','1px');currentScript.parentNode.appendChild(trackdiv);var elem=trackdiv;var vp_w=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var vp_h=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var url="//get.mirando.de/download/mirando/publisher-quality/track.php?";url+="vp="+vp_w+"x"+vp_h;var elemrect=elem.getBoundingClientRect();elem.style.display="none";url+="&pos="+Math.round(elemrect.left)+"x"+Math.round(elemrect.top);url+="&impid="+_impressionId;url+="&apid="+_adPlaceId;var iframe=0;var uri=self.location.href;var ref_uri=document.referrer;if(top.location.href!=self.location.href){iframe=1;ref_uri=top.location.href;}
    url+="&iframe="+iframe;url+="&uri="+escape(uri);if(ref_uri)
        url+="&refuri="+escape(ref_uri);url+="&client="+navigator.userAgent+";"+navigator.appName+";"+navigator.platform;url+="&pid="+mirPageViewID;var adplace_count=0;var all=document.getElementsByTagName("script");for(var i=0;i<all.length;i++){elem=all[i];if(elem.src&&elem.src.indexOf("mirando.js#a="+_adPlaceId)>=0&&elem.src.indexOf("role=ss")<0){adplace_count++;}}
    url+="&ac="+adplace_count;var trackpix=document.createElement("img");trackpix.setAttribute('src',url);trackpix.setAttribute('height','1px');trackpix.setAttribute('width','1px');trackpix.style.position='absolute';trackpix.style.left='-1000px';trackpix.style.top='-1000px';document.body.appendChild(trackpix);return url;};try{if(typeof adPlaceId!=='undefined'&&typeof impressionId!=='undefined'){}}
catch(e){console.log(e);}};Mirando.measuringHandler=function(){var measurings=[];this.init=function(type,url){var self=this;var w=window;w.addEventListener?w.addEventListener("beforeunload",function(){return self.unload();},!1):w.attachEvent&&w.attachEvent("onbeforeunload",function(){return self.unload();});w.addEventListener?w.addEventListener("scroll",function(){return self.adjustScrollDepth();},!1):w.attachEvent&&w.attachEvent("onscroll",function(){return self.adjustScrollDepth();});};this.register=function(type,url){var self=this;var measuring=[];measuring['type']=type;measuring['url']=url;measuring['ts']=new Date().getTime();measuring['sd']=self.currentScrollDepth();measurings.push(measuring);};this.unload=function(){var self=this;var cMeasurings=self.shuffledMeasurings();for(var i=0;i<cMeasurings.length;i++){var measuring=cMeasurings[i];var image=document.createElement("img");var url=measuring['url']+'?meas=';switch(measuring['type']){case'TIMESPENT':url+=self.getTimeSpent(measuring['ts']);break;case'SCROLLDEPTH':if(null===measuring['sd']){continue;}
    url+=measuring['sd'];break;}
    image.src=url;document.body.appendChild(image);}};this.getTimeSpent=function(initialTimestamp){return new Date().getTime()-initialTimestamp;};this.currentScrollDepth=function(initialTimestamp){function getDocHeight(){var D=document;return Math.max(D.body.scrollHeight,D.documentElement.scrollHeight,D.body.offsetHeight,D.documentElement.offsetHeight,D.body.clientHeight,D.documentElement.clientHeight)}
    var winheight=window.innerHeight||(document.documentElement||document.body).clientHeight
    var docheight=getDocHeight()
    var scrollTop=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop
    var pctScrolled=Math.round((winheight+scrollTop)*100 / docheight);if(isNaN(pctScrolled)||pctScrolled<0||pctScrolled>100){return null;}
    return pctScrolled;};this.adjustScrollDepth=function(initialTimestamp){var self=this;var sd=self.currentScrollDepth();for(var i=0;i<measurings.length;i++){if(sd>measurings[i]['sd']){measurings[i]['sd']=sd;}}};this.shuffledMeasurings=function(){a=measurings;var j,x,i;for(i=a.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));x=a[i];a[i]=a[j];a[j]=x;}
    return a;}};if(!mirPageViewID){var mirPageViewID=Math.random().toString(36).slice(-12)+"-"+Math.random().toString(36).slice(-12)+"-"+Math.random().toString(36).slice(-12)+"-"+Math.random().toString(36).slice(-12);}
if(!(typeof window.mirandoAdLoaderInited!=='undefined'||window.mirandoAdLoaderInited)){window.mirandoAdLoaderInited=true;var mirandoAsyncLoader=new Mirando.AsyncLoader();var mirandoAdLoader=new Mirando.adLoader();var mirandoMeasuringHandler=new Mirando.measuringHandler();mirandoMeasuringHandler.init();}
var nextAdCounter=mirandoAdLoader.nextAdCounter();var adplaceId=mirandoAdLoader.showAd(nextAdCounter);if((window.location.href.indexOf('wurzelsepp.dev')>=0||window.location.href.indexOf('wetterspiegel')>=0)&&!window.mirScrollStop){window.mirScrollStop=true;window.onscroll=function(){window.scrollTo(0,0);};window.scrollTo(0,0);document.body.style.overflow='hidden';setTimeout(function(){window.onscroll=function(){};document.body.style.overflow='visible'},5000);}
if(adplaceId>=0){var mirScripts=document.getElementsByTagName('script');var mirandoJsSrc=mirScripts[mirScripts.length-1].src;for(var i=0;i<mirScripts.length;i++){if(typeof mirScripts[i].src!=='undefined'){if(mirScripts[i].src.indexOf("mirando.js#a")!=-1)
    mirandoJsSrc=mirScripts[i].src;}}
    var mirUriHash=(mirandoJsSrc.indexOf("#")!=-1)?mirandoJsSrc.split('#')[1].split('&')[0].split('=')[1]:((mirandoJsSrc.indexOf("a=")!=-1)?mirandoJsSrc.split('a=')[1].split('&')[0]:false);mirUriHash=""+mirUriHash;var blockBatchCounting=false;var blockedAdplaceIds=[6950,6951,6952,6944,6945,6947,6948,6946,1830911,11449579,11449571,11449573,11449572,11449570,11449569,11449577,11449576,11449575,11449580,13662560,13662564,13963930,13964112,13963917,15586239,15847019,16045451,16425060,16425062,16425065,17536352,17582704];if(mirUriHash&&!blockBatchCounting&&blockedAdplaceIds.indexOf(parseInt(mirUriHash))>=0){blockBatchCounting=true;}
    if(!mirBatchInsert&&!blockBatchCounting){var mirBatchInsert=true;var se=document.createElement('script');se.type='text/javascript';se.src='//c.t4ft.de/c/ftg_t.min.js?aid=1306&fcui=1774097&fcai=1774098&ffli=1774099&fpli=1774100';document.body.appendChild(se);}}
